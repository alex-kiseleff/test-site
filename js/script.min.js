"use strict";function $$(e){return document.querySelector(e)}function openModalWindow(){$$(".header__button").addEventListener("click",(function(e){$$(".modal-window").classList.add("active"),$$(".modal-window__button").addEventListener("click",checkFormRunMainFunction),$$(".modal-window__container").addEventListener("click",toGoWithModalWindow(e))}))}function toGoWithModalWindow(){return function(e){e.target.className===$$(".modal-window__container").className&&($$(".modal-window").classList.remove("active"),$$(".modal-window__button").removeEventListener("click",checkFormRunMainFunction),$$(".modal-window__container").removeEventListener("click",toGoWithModalWindow))}}function setDataUserAfterReboot(){sessionStorage.getItem("userName")&&(showLogin(),editLogin())}function getDataUserWithForm(){return!(!checkValidUserName(spaceDelete($$(".modal-window__input_name").value))||!checkValidUserPassword(spaceDelete($$(".modal-window__input_password").value)))&&[spaceDelete($$(".modal-window__input_name").value),spaceDelete($$(".modal-window__input_password").value)]}function checkFormRunMainFunction(){getDataUserWithForm()?(startWorkSite(),$$(".modal-window").classList.remove("active"),$$(".modal-window__button").removeEventListener("click",checkFormRunMainFunction)):(alert("Длина имени не должна превышать 12 символов и все поля должны быть заполнены!"),$$(".modal-window__input_name").value="",$$(".modal-window__input_password").value="")}function spaceDelete(e){return e.split(" ").join("")}function checkValidUserName(e){return!!(e&&e.length<=12)}function checkValidUserPassword(e){return!!e}function setUserData(e){e&&($$(".modal-window__checkbox").checked&&alert("Ваши данные будут сохранены в браузере."),sessionStorage.setItem("userName",e[0]),sessionStorage.setItem("userPassword",e[1]),showLogin())}function logOutOfAuthorization(){$$(".header__button").classList.add("active"),$$(".header__exit-button").classList.remove("active"),removeDataSession(["userName","userPassword","dataTab"]),$$(".header__open-button_click").removeEventListener("click",logOutOfAuthorization),$$(".modal-window__input_name").value="",$$(".modal-window__input_password").value=""}function removeDataSession(e){e.forEach((function(e){sessionStorage.removeItem(e)}))}function showLogin(){$$(".header__button").classList.remove("active"),$$(".header__exit-button").classList.add("active"),$$(".header__nickname").value=sessionStorage.getItem("userName"),$$(".header__open-button_click").addEventListener("click",logOutOfAuthorization),$$(".header__button").removeEventListener("click",openModalWindow)}function editLogin(){var e=$$(".header__nickname");e.addEventListener("focus",(function(){e.style.color="#000",e.style.textAlign="right",e.value=""})),e.addEventListener("blur",(function(){e.value?checkValidUserName(spaceDelete(e.value))?(sessionStorage.setItem("userName",spaceDelete(e.value)),showLogin()):(e.style.color="#e5261e",e.style.textAlign="center",e.value="не более 12"):e.value=sessionStorage.getItem("userName")}))}function getArrayTabs(){return document.querySelectorAll(".tabs__item")}function getCurrentValueTab(){return sessionStorage.getItem("dataTab")?sessionStorage.getItem("dataTab"):"movies"}function switchTabs(){changeClassActive(getCurrentValueTab()),installSavedTab(getArrayTabs()),setClickedTab(getArrayTabs())}function setClickedTab(e){e.forEach((function(t){t.addEventListener("click",(function(t){e.forEach((function(e){e.classList.remove("tabs__item_active")})),t.target.classList.add("tabs__item_active"),sessionStorage.setItem("dataTab",t.target.getAttribute("data-tab")),changeClassActive(getCurrentValueTab())}))}))}function installSavedTab(e){e.forEach((function(e){getCurrentValueTab()===e.getAttribute("data-tab")?e.classList.add("tabs__item_active"):e.classList.remove("tabs__item_active")}))}function changeClassActive(e){"movies"===e&&($$(".new-product").classList.add("active"),$$(".genre").classList.add("active"),$$(".channels").classList.remove("active")),"channels"===e&&($$(".new-product").classList.remove("active"),$$(".genre").classList.remove("active"),$$(".channels").classList.add("active"))}function startWorkSite(){setUserData(getDataUserWithForm()),showLogin(),editLogin()}function testWebP(e){var t=new Image;t.onload=t.onerror=function(){e(2===t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}testWebP((function(e){e&&document.querySelector("body").classList.add("webp")})),switchTabs(),setDataUserAfterReboot(),openModalWindow(),toGoWithModalWindow();